{"version":3,"sources":["uni-app:///main.js","webpack:////Users/bytedance/Documents/HBuilderProjects/review_wx_applets/pages/room/room.vue?5837","webpack:////Users/bytedance/Documents/HBuilderProjects/review_wx_applets/pages/room/room.vue?d750","webpack:////Users/bytedance/Documents/HBuilderProjects/review_wx_applets/pages/room/room.vue?3f19","webpack:////Users/bytedance/Documents/HBuilderProjects/review_wx_applets/pages/room/room.vue?19d2","uni-app:///pages/room/room.vue","webpack:////Users/bytedance/Documents/HBuilderProjects/review_wx_applets/pages/room/room.vue?d542"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","trtcRoom","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","userID","userSig","template","subscribeList","props","onLoad","log","uni","setKeepScreenOn","keepScreenOn","trtcComponent","$refs","bindTRTCRoomEvent","Object","getOwnPropertyNames","forEach","key","enterRoom","roomID","Number","debugMode","frontCamera","localVideo","localAudio","enableEarMonitor","enableAutoFocus","localMirror","enableAgc","enableAns","videoHeight","videoWidth","maxBitrate","minBitrate","audioVolumeType","audioQuality","scene","encsmall","cloudenv","enableBlackStream","streamID","userDefineRecordID","privateMapKey","pureAudioMode","recvMode","enableRecvMessage","onReady","onShow","onHide","onUnload","onPullDownRefresh","onReachBottom","onShareAppMessage","methods","params","randomRoomID","randomUserID","sdkAppID","Signature","rtcConfig","beautyLevel","enableIM","setData","xAxis","yAxis","width","height","res","timestamp","on","TRTC_EVENT","LOCAL_JOIN","event","LOCAL_LEAVE","ERROR","REMOTE_USER_JOIN","interval","showTipToast","setTimeout","navigateBack","delta","REMOTE_USER_LEAVE","REMOTE_VIDEO_ADD","data","streamType","item","index","y","REMOTE_VIDEO_REMOVE","REMOTE_AUDIO_ADD","REMOTE_AUDIO_REMOVE","IM_READY","IM_MESSAGE_RECEIVED","Date","getTime","toString","split","reverse","join","parseInt","Math","random"],"mappings":"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","file":"pages/room/room.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/room/room.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./room.vue?vue&type=template&id=3308d434&\"\nvar renderjs\nimport script from \"./room.vue?vue&type=script&lang=js&\"\nexport * from \"./room.vue?vue&type=script&lang=js&\"\nimport style0 from \"./room.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/room/room.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./room.vue?vue&type=template&id=3308d434&\"","var components\ntry {\n  components = {\n    trtcRoom: function() {\n      return import(\n        /* webpackChunkName: \"components/trtc-room/trtc-room\" */ \"@/components/trtc-room/trtc-room.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./room.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./room.vue?vue&type=script&lang=js&\"","<template>\n<!--miniprogram/pages/room/room.wxml-->\n<!-- 在模版上放置标签 -->\n<view class=\"page-room\">\n  <trtc-room ref=\"trtc-component\" :config=\"rtcConfig\"> </trtc-room>\n  <view class=\"tip-toast\" v-if=\"showTipToast\">\n    <view>当前房间为1v1双人通话房间</view>\n    <view>不希望其他人打扰</view>\n  </view>\n</view>\n</template>\n\n<script>\nimport { genTestUserSig } from \"../../debug/GenerateTestUserSig\";\nimport trtcRoom from \"../../components/trtc-room/trtc-room\";\n\nexport default {\n  data() {\n    return {\n      rtcConfig: {\n        sdkAppID: '1400584863',\n        // 必要参数 开通实时音视频服务创建应用后分配的 sdkAppID\n        userID: '',\n        // 必要参数 用户 ID 可以由您的帐号系统指定\n        userSig: '',\n        // 必要参数 身份签名，相当于登录密码的作用\n        template: '1v1' // 必要参数 组件模版，支持的值 1v1 grid custom ，注意：不支持动态修改, iOS 不支持 pusher 动态渲染\n\n      },\n      showTipToast: false,\n      subscribeList: {}\n    };\n  },\n\n  components: {\n    trtcRoom\n  },\n  props: {},\n\n  /**\n   * 生命周期函数--监听页面加载\n   * @param {*} options 配置项\n   */\n  onLoad: function (options) {\n\t  console.log('进入房间打印options:'+options.consulId)\n\t  if(options.consulId != \"\" && options.consulId != undefined){\n\t\t  this.$apis.postListConsultationDetai({'id': options.consulId}).then(res => {\n\t\t  \tuni.hideLoading()\n\t\t  \tif (res.code == 200) {\n\t\t  \t\tres.result.forEach((row) => {\n\t\t  \t\t\tif(res.videoConsult != 'Y'){\n\t\t  \t\t\t\tuni.showModal({\n\t\t  \t\t\t\t\ttitle:'提示',\n\t\t\t\t\t\t\tcontent:'未到预约时间或预约订单未支付',\n\t\t\t\t\t\t\tsuccess:function(res){\n\t\t\t\t\t\t\t\tif(res.confirm){\n\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\turl: '/pages/expert/consultationDetail?id='+ options.consulId\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t  \t\t\t\t})\n\t\t  \t\t\t}else{\n\t\t\t\t\t\t//给专家发送房间号\n\t\t\t\t\t\tthis.$apis.postSendRoomId({'roomId': options.roomID,'expertPhone':options.mobilePhone}).then(res => {\n\t\t\t\t\t\t\tif (res.code == 200) {\n\t\t\t\t\t\t\t\tconsole.log('给专家发送房间号成功')\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: res.msg\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t  \t\t})\n\t\t  \t} else {\n\t\t  \t\tuni.showToast({\n\t\t  \t\t\ttitle: res.msg\n\t\t  \t\t})\n\t\t  \t}\n\t\t  }).catch(err => {\n\t\t  \tuni.hideLoading()\n\t\t  \tconsole.log(err)\n\t\t  })\n\t  }\n    console.log('room onload', options);\n    uni.setKeepScreenOn({\n      keepScreenOn: true\n    }); // 获取 rtcroom 实例\n\n    this.trtcComponent = this.$refs['trtc-component']; // 监听TRTC Room 关键事件\n\n    this.bindTRTCRoomEvent(); // 将String 类型的 true false 转换成 boolean\n\n    Object.getOwnPropertyNames(options).forEach(key => {\n      if (options[key] === 'true') {\n        options[key] = true;\n      }\n\n      if (options[key] === 'false') {\n        options[key] = false;\n      }\n    });\n    this.options = options; // querystring 只支持传递 String 类型, 注意类型转换\n\n    this.enterRoom({\n      roomID: Number(options.roomID),\n      userID: options.userID,\n      template: options.template,\n      debugMode: options.debugMode,\n      frontCamera: options.frontCamera,\n      localVideo: options.localVideo,\n      localAudio: options.localAudio,\n      enableEarMonitor: options.enableEarMonitor,\n      enableAutoFocus: options.enableAutoFocus,\n      localMirror: options.localMirror,\n      enableAgc: options.enableAgc,\n      enableAns: options.enableAns,\n      videoHeight: options.videoHeight,\n      videoWidth: options.videoWidth,\n      maxBitrate: Number(options.maxBitrate),\n      minBitrate: Number(options.minBitrate),\n      audioVolumeType: options.audioVolumeType,\n      audioQuality: options.audioQuality,\n      // pusher URL 参数\n      scene: options.scene,\n      encsmall: options.encsmall,\n      cloudenv: options.cloudenv,\n      enableBlackStream: options.enableBlackStream,\n      streamID: options.streamID,\n      userDefineRecordID: options.userDefineRecordID,\n      privateMapKey: options.privateMapKey,\n      pureAudioMode: options.pureAudioMode,\n      recvMode: options.recvMode,\n      // player 参数\n      enableRecvMessage: options.enableRecvMessage\n    });\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n    console.log('room ready');\n    uni.setKeepScreenOn({\n      keepScreenOn: true\n    });\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    console.log('room show');\n    uni.setKeepScreenOn({\n      keepScreenOn: true\n    });\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n    console.log('room hide'); // onHide 后由微信接管，限制了不能退房，只能取消订阅\n    // 退后台后取消发布音频\n    // this.trtcComponent.unpublishLocalAudio()\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n    console.log('room unload');\n    uni.setKeepScreenOn({\n      keepScreenOn: false\n    });\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {},\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {},\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {},\n  methods: {\n    enterRoom: function (params) {\n      params.template = params.template || '1v1';\n      params.roomID = params.roomID || this.randomRoomID();\n\t  console.log('打印随机房间号：'+params.roomID);\n      params.userID = params.userID || this.randomUserID();\n      console.log('* room enterRoom', params);\n      const Signature = genTestUserSig(params.userID);\n      params.sdkAppID = Signature.sdkAppID;\n      params.userSig = Signature.userSig;\n      this.template = params.template;\n\n      if (params.template === 'grid') {\n        this.rtcConfig = {\n          sdkAppID: params.sdkAppID,\n          // 您的实时音视频服务创建应用后分配的 sdkAppID\n          userID: params.userID,\n          userSig: params.userSig,\n          template: params.template,\n          // 1v1 grid custom\n          debugMode: params.debugMode,\n          // 非必要参数，打开组件的调试模式，开发调试时建议设置为 true\n          frontCamera: params.frontCamera,\n          enableEarMonitor: params.enableEarMonitor,\n          enableAutoFocus: params.enableAutoFocus,\n          localMirror: params.localMirror,\n          enableAgc: params.enableAgc,\n          enableAns: params.enableAns,\n          videoWidth: params.videoWidth,\n          videoHeight: params.videoHeight,\n          maxBitrate: params.maxBitrate,\n          minBitrate: params.minBitrate,\n          beautyLevel: 9,\n          // 开启美颜等级 0～9级美颜\n          enableIM: false,\n          // 可选，仅支持初始化设置（进房前设置），不支持动态修改\n          audioVolumeType: params.audioVolumeType,\n          audioQuality: params.audioQuality,\n          // pusher URL 参数\n          scene: params.scene,\n          // rtc live\n          encsmall: params.encsmall ? 1 : 0,\n          cloudenv: params.cloudenv,\n          enableBlackStream: params.enableBlackStream,\n          streamID: params.streamID,\n          userDefineRecordID: params.userDefineRecordID,\n          privateMapKey: params.privateMapKey,\n          pureAudioMode: params.pureAudioMode,\n          recvMode: params.recvMode\n        };\n      } else {\n        this.rtcConfig = {\n          sdkAppID: params.sdkAppID,\n          // 您的实时音视频服务创建应用后分配的 sdkAppID\n          userID: params.userID,\n          userSig: params.userSig,\n          template: params.template,\n          // 1v1 grid custom\n          debugMode: params.debugMode,\n          // 非必要参数，打开组件的调试模式，开发调试时建议设置为 true\n          beautyLevel: 9,\n          // 默认开启美颜\n          enableIM: false,\n          // 可选，仅支持初始化设置（进房前设置），不支持动态修改\n          audioVolumeType: params.audioVolumeType\n        };\n      }\n\n      this.setData({\n        rtcConfig: this.rtcConfig\n      }, () => {\n        // roomID 取值范围 1 ~ 4294967295\n        this.trtcComponent.enterRoom({\n          roomID: params.roomID\n        }).then(() => {\n          if (this.template === 'custom') {\n            // 设置推流端视窗的坐标和尺寸\n            this.trtcComponent.setViewRect({\n              userID: params.userID,\n              xAxis: '480rpx',\n              yAxis: '160rpx',\n              width: '240rpx',\n              height: '320rpx'\n            });\n          }\n        }).catch(res => {\n          console.error('* room joinRoom 进房失败:', res);\n        });\n      });\n    },\n    bindTRTCRoomEvent: function () {\n      const TRTC_EVENT = this.trtcComponent.EVENT;\n      this.timestamp = []; // 初始化事件订阅\n\n      this.trtcComponent.on(TRTC_EVENT.LOCAL_JOIN, event => {\n        console.log('* room LOCAL_JOIN', event); // 进房成功，触发该事件后可以对本地视频和音频进行设置\n\n        if (this.options.localVideo === true || this.options.template === '1v1') {\n          this.trtcComponent.publishLocalVideo();\n        }\n\n        if (this.options.localAudio === true || this.options.template === '1v1') {\n          this.trtcComponent.publishLocalAudio();\n        }\n\n        if (this.options.template === 'custom') {\n          this.trtcComponent.setViewRect({\n            userID: event.userID,\n            xAxis: '0rpx',\n            yAxis: '0rpx',\n            width: '240rpx',\n            height: '320rpx'\n          });\n        }\n      });\n      this.trtcComponent.on(TRTC_EVENT.LOCAL_LEAVE, event => {\n        console.log('* room LOCAL_LEAVE', event);\n      });\n      this.trtcComponent.on(TRTC_EVENT.ERROR, event => {\n        console.log('* room ERROR', event);\n      }); // 远端用户进房\n\n      this.trtcComponent.on(TRTC_EVENT.REMOTE_USER_JOIN, event => {\n        console.log('* room REMOTE_USER_JOIN', event, this.trtcComponent.getRemoteUserList());\n        this.timestamp.push(new Date()); // 1v1视频通话时限制人数为两人的简易逻辑，建议通过后端实现房间人数管理\n        // 2人以上同时进行通话请选择网格布局\n\n        if (this.template === '1v1' && this.timestamp.length > 1) {\n          const interval = this.timestamp[1] - this.timestamp[0];\n\n          if (interval < 1000) {\n            // 房间里已经有两个人\n            this.setData({\n              showTipToast: true\n            }, () => {\n              setTimeout(() => {\n                this.setData({\n                  showTipToast: false\n                });\n                uni.navigateBack({\n                  delta: 1\n                });\n              }, 4000);\n            });\n          }\n        }\n      }); // 远端用户退出\n\n      this.trtcComponent.on(TRTC_EVENT.REMOTE_USER_LEAVE, event => {\n        console.log('* room REMOTE_USER_LEAVE', event, this.trtcComponent.getRemoteUserList());\n\n        if (this.template === '1v1') {\n          this.timestamp = [];\n        }\n\n        if (this.template === '1v1' && this.remoteUser === event.data.userID) {\n          this.remoteUser = null;\n        }\n      }); // 远端用户推送视频\n\n      this.trtcComponent.on(TRTC_EVENT.REMOTE_VIDEO_ADD, event => {\n        console.log('* room REMOTE_VIDEO_ADD', event, this.trtcComponent.getRemoteUserList()); // 订阅视频\n\n        const userList = this.trtcComponent.getRemoteUserList();\n        const data = event.data;\n\n        if (this.template === '1v1' && (!this.remoteUser || this.remoteUser === data.userID)) {\n          // 1v1 只订阅第一个远端流\n          this.remoteUser = data.userID;\n          this.trtcComponent.subscribeRemoteVideo({\n            userID: data.userID,\n            streamType: data.streamType\n          });\n        } else {\n          // if (!this.data.subscribeList[data.userID + '-video']) {\n          this.trtcComponent.subscribeRemoteVideo({\n            userID: data.userID,\n            streamType: data.streamType\n          }); // 标记该用户已首次订阅过\n\n          this.subscribeList[data.userID + '-video'] = true; // }\n        }\n\n        if (this.template === 'custom' && data.userID && data.streamType) {\n          let index = userList.findIndex(item => {\n            return item.userID === data.userID;\n          });\n          index++;\n          const y = 320 * index + 160; // 设置远端视图坐标和尺寸\n\n          this.trtcComponent.setViewRect({\n            userID: data.userID,\n            streamType: data.streamType,\n            xAxis: '480rpx',\n            yAxis: y + 'rpx',\n            width: '240rpx',\n            height: '320rpx'\n          });\n        }\n      }); // 远端用户取消推送视频\n\n      this.trtcComponent.on(TRTC_EVENT.REMOTE_VIDEO_REMOVE, event => {\n        console.log('* room REMOTE_VIDEO_REMOVE', event, this.trtcComponent.getRemoteUserList());\n      }); // 远端用户推送音频\n\n      this.trtcComponent.on(TRTC_EVENT.REMOTE_AUDIO_ADD, event => {\n        console.log('* room REMOTE_AUDIO_ADD', event, this.trtcComponent.getRemoteUserList()); // 订阅音频\n\n        const data = event.data;\n\n        if (this.template === '1v1' && (!this.remoteUser || this.remoteUser === data.userID)) {\n          this.remoteUser = data.userID;\n          this.trtcComponent.subscribeRemoteAudio({\n            userID: data.userID\n          });\n        } else {\n          // if (!this.data.subscribeList[data.userID + '-audio']) {\n          this.trtcComponent.subscribeRemoteAudio({\n            userID: data.userID\n          }); // 标记该用户已首次订阅过\n\n          this.subscribeList[data.userID + '-audio'] = true; // }\n        }\n      }); // 远端用户取消推送音频\n\n      this.trtcComponent.on(TRTC_EVENT.REMOTE_AUDIO_REMOVE, event => {\n        console.log('* room REMOTE_AUDIO_REMOVE', event, this.trtcComponent.getRemoteUserList());\n      }); // this.trtcComponent.on(TRTC_EVENT.LOCAL_NET_STATE_UPDATE, (event)=>{\n      //   console.log('* room LOCAL_NET_STATE_UPDATE', event)\n      // })\n      // this.trtcComponent.on(TRTC_EVENT.REMOTE_NET_STATE_UPDATE, (event)=>{\n      //   console.log('* room REMOTE_NET_STATE_UPDATE', event)\n      // })\n\n      this.trtcComponent.on(TRTC_EVENT.IM_READY, event => {\n        console.log('* room IM_READY', event);\n      });\n      this.trtcComponent.on(TRTC_EVENT.IM_MESSAGE_RECEIVED, event => {\n        console.log('* room IM_MESSAGE_RECEIVED', event);\n      });\n    },\n    randomUserID: function () {\n      return new Date().getTime().toString(16).split('').reverse().join('');\n    },\n    randomRoomID: function () {\n      return parseInt(Math.random() * 9999);\n    }\n  }\n};\n</script>\n<style>\n/* miniprogram/pages/room/room.wxss */\n.page-room{\n  width: 100vw;\n  height: 100vh;\n  overflow: hidden;\n}\n.tip-toast {\n  position: absolute;\n  top: 40vh;\n  width: 70vw;\n  left: 15vw;\n  border-radius: 12rpx;\n  height: 20vh;\n  background: rgba(0,0,0,0.8);\n  color: white;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n\n}\n.tip-toast view {\n  padding: 20rpx 0;\n  font-size: 32rpx;\n}\n</style>","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./room.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./room.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}