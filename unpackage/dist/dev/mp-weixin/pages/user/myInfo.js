(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/myInfo"],{154:function(e,n,o){"use strict";(function(e){o(5);t(o(3));var n=t(o(155));function t(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=o,e(n.default)}).call(this,o(1)["createPage"])},155:function(e,n,o){"use strict";o.r(n);var t=o(156),i=o(158);for(var r in i)"default"!==r&&function(e){o.d(n,e,(function(){return i[e]}))}(r);o(160);var s,u=o(26),c=Object(u["default"])(i["default"],t["render"],t["staticRenderFns"],!1,null,"63d6e756",null,!1,t["components"],s);c.options.__file="pages/user/myInfo.vue",n["default"]=c.exports},156:function(e,n,o){"use strict";o.r(n);var t=o(157);o.d(n,"render",(function(){return t["render"]})),o.d(n,"staticRenderFns",(function(){return t["staticRenderFns"]})),o.d(n,"recyclableRender",(function(){return t["recyclableRender"]})),o.d(n,"components",(function(){return t["components"]}))},157:function(e,n,o){"use strict";var t;o.r(n),o.d(n,"render",(function(){return i})),o.d(n,"staticRenderFns",(function(){return s})),o.d(n,"recyclableRender",(function(){return r})),o.d(n,"components",(function(){return t}));try{t={uForm:function(){return o.e("uview-ui/components/u-form/u-form").then(o.bind(null,343))},uFormItem:function(){return Promise.all([o.e("common/vendor"),o.e("uview-ui/components/u-form-item/u-form-item")]).then(o.bind(null,350))},uInput:function(){return Promise.all([o.e("common/vendor"),o.e("uview-ui/components/u-input/u-input")]).then(o.bind(null,361))},uRadioGroup:function(){return Promise.all([o.e("common/vendor"),o.e("uview-ui/components/u-radio-group/u-radio-group")]).then(o.bind(null,368))},uRadio:function(){return o.e("uview-ui/components/u-radio/u-radio").then(o.bind(null,375))}}}catch(u){if(-1===u.message.indexOf("Cannot find module")||-1===u.message.indexOf(".vue"))throw u;console.error(u.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var e=this,n=e.$createElement;e._self._c},r=!1,s=[];i._withStripped=!0},158:function(e,n,o){"use strict";o.r(n);var t=o(159),i=o.n(t);for(var r in t)"default"!==r&&function(e){o.d(n,e,(function(){return t[e]}))}(r);n["default"]=i.a},159:function(e,n,o){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=i(o(9));function i(e){return e&&e.__esModule?e:{default:e}}var r={onLoad:function(n){var o=this;e.showLoading({title:"数据加载中"}),t.default.checkLogin((function(n){e.hideLoading(),o.form.userName=n.userName,o.form.age=n.age,o.form.mobilePhone=n.mobilePhone,o.form.sex=n.sex,o.form.openid=n.openid,o.form.userId=n.userId,o.orgMobilePhone=n.mobilePhone})).catch((function(n){e.hideLoading(),console.log(n)}))},data:function(){var e=this;return{showCode:!1,code:"",orgMobilePhone:"",form:{userName:"",age:"",mobilePhone:"",sex:"",openid:"",extraObj:{},userId:"",msgCode:""},sexList:[{name:"男",code:"1",disabled:!1},{name:"女",code:"2",disabled:!1}],yesOrNo:[{name:"是",code:"1",disabled:!1,checked:!1},{name:"否",code:"2",disabled:!1,checked:!0}],rules:{userName:[{required:!0,message:"请输入姓名",trigger:["change","blur"]}],sex:[{required:!0,message:"请选择性别",trigger:["change","blur"]}],mobilePhone:[{required:!0,message:"请输入联系方式",trigger:["change","blur"]},{validator:function(n,o,t){return e.$u.test.mobile(o)},message:"手机号码不正确",trigger:["change","blur"]}]},countDown:60,timer:{},msgVerCode:"获取验证码",isLock:!1,codeBtnColor:"#ede3cb"}},onUnload:function(){this.timer&&this.clearTimer()},methods:{secrecyCheck:function(e){"0"==e.detail.value?this.secrecy=!0:this.secrecy=!1},toDetail:function(){e.navigateTo({url:"/pages/user/privacyProto"})},sendMsg:function(){var n=this;if(this.form.mobilePhone&&this.$u.test.mobile(this.form.mobilePhone)){this.isLock=!0;var o=this;this.$apis.postSendMsgCode({mobilePhone:this.form.mobilePhone}).then((function(t){200==t.code?(e.showToast({icon:"success",title:"验证码发送成功"}),n.timer=setInterval((function(){0==n.countDown?(n.reset(),n.timer&&n.clearTimer()):n.loading()}),1e3)):(o.reset(),e.showToast({icon:"fail",title:t.msg}))})).catch((function(e){o.reset(),console.log(e)}))}else e.showToast({icon:"fail",title:"手机号为空或格式不正确"})},loading:function(){this.isLock=!0,this.countDown-=1,this.msgVerCode=this.countDown+"秒后重发"},reset:function(){this.countDown=60,this.isLock=!1,this.msgVerCode="获取验证码"},clearTimer:function(){clearInterval(this.timer),this.timer=null},updateUser:function(){var n=this;this.$apis.postUpdateUserInfo(this.form).then((function(o){e.hideLoading(),200==o.code?(n.form.msgCode="",n.form.userId=o.result,e.setStorageSync("userData",n.form),e.switchTab({url:"/pages/user/index"})):e.showToast({title:o.msg})})).catch((function(n){e.hideLoading(),console.log(n)}))},submit:function(){if(this.secrecy){var n=this;e.showLoading({title:"信息提交中"}),this.$refs.uForm.validate((function(o){if(o){if(n.orgMobilePhone!=n.form.mobilePhone&&!n.form.msgCode)return e.hideLoading(),void e.showToast({title:"修改手机号需要验证码",icon:"none"});n.updateUser()}else console.log("验证失败")}))}else e.showToast({title:"请选择同意用户隐私协议",icon:"none"})}},onReady:function(){this.$refs.uForm.setRules(this.rules)}};n.default=r}).call(this,o(1)["default"])},160:function(e,n,o){"use strict";o.r(n);var t=o(161),i=o.n(t);for(var r in t)"default"!==r&&function(e){o.d(n,e,(function(){return t[e]}))}(r);n["default"]=i.a},161:function(e,n,o){}},[[154,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/user/myInfo.js.map