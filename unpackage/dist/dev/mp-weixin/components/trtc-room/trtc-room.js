(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/trtc-room/trtc-room"],{438:function(e,t,s){"use strict";s.r(t);var r=s(439),o=s(441);for(var n in o)"default"!==n&&function(e){s.d(t,e,(function(){return o[e]}))}(n);s(453);var i,a=s(26),u=Object(a["default"])(o["default"],r["render"],r["staticRenderFns"],!1,null,null,null,!1,r["components"],i);u.options.__file="components/trtc-room/trtc-room.vue",t["default"]=u.exports},439:function(e,t,s){"use strict";s.r(t);var r=s(440);s.d(t,"render",(function(){return r["render"]})),s.d(t,"staticRenderFns",(function(){return r["staticRenderFns"]})),s.d(t,"recyclableRender",(function(){return r["recyclableRender"]})),s.d(t,"components",(function(){return r["components"]}))},440:function(e,t,s){"use strict";var r;s.r(t),s.d(t,"render",(function(){return o})),s.d(t,"staticRenderFns",(function(){return i})),s.d(t,"recyclableRender",(function(){return n})),s.d(t,"components",(function(){return r}));var o=function(){var e=this,t=e.$createElement;e._self._c},n=!1,i=[];o._withStripped=!0},441:function(e,t,s){"use strict";s.r(t);var r=s(442),o=s.n(r);for(var n in r)"default"!==n&&function(e){s.d(t,e,(function(){return r[e]}))}(n);t["default"]=o.a},442:function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=d(s(443)),o=d(s(448)),n=s(447),i=d(s(444)),a=h(s(449)),u=d(s(451)),l=d(s(452));function c(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function h(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var n=r?Object.getOwnPropertyDescriptor(e,o):null;n&&(n.get||n.set)?Object.defineProperty(s,o,n):s[o]=e[o]}return s.default=e,t&&t.set(e,s),s}function d(e){return e&&e.__esModule?e:{default:e}}function g(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function m(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?g(Object(s),!0).forEach((function(t){f(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):g(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function f(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var p="TRTC-ROOM",T=u.default.TYPES.GRP_CHATROOM,I=0,E=0,P={data:function(){return{pusher:null,debugPanel:!0,debug:!1,streamList:[],visibleStreamList:[],userList:[],template:"",cameraPosition:"",panelName:"",localVolume:0,remoteVolumeList:[],enableIM:!1,showIMPanel:!1,exitIMThrottle:!1,messageContent:"",messageList:[],maxMessageListLength:10,messageListScrollTop:0,appVersion:a.APP_VERSION,libVersion:a.LIB_VERSION,hasGridPageTipsShow:!1,gridPageCount:0,gridCurrentPage:1,gridPlayerPerPage:4,gridPagePlaceholderStreamList:[],isFullscreenDevice:a.IS_FULLSCREEN_DEVICE,isShowMoreMenu:!1,MICVolume:50,BGMVolume:50,BGMProgress:0,beautyStyle:"smooth",beautyStyleArray:[{value:"smooth",label:"光滑",checked:!0},{value:"nature",label:"自然",checked:!1},{value:"close",label:"关闭",checked:!1}],filterIndex:0,filterArray:[{value:"standard",label:"标准"},{value:"pink",label:"粉嫩"},{value:"nostalgia",label:"怀旧"},{value:"blues",label:"蓝调"},{value:"romantic",label:"浪漫"},{value:"cool",label:"清凉"},{value:"fresher",label:"清新"},{value:"solor",label:"日系"},{value:"aestheticism",label:"唯美"},{value:"whitening",label:"美白"},{value:"cerisered",label:"樱红"}],audioReverbType:0,audioReverbTypeArray:["关闭","KTV","小房间","大会堂","低沉","洪亮","金属声","磁性"],debugMode:""}},computed:{sbstyle:function(){var e=this.visibleStreamList;return"grid-container "+(e.length<4?"stream-"+e.length:"stream-3")}},components:{},props:{config:{type:Object,default:function(){return{sdkAppID:"",userID:"",userSig:"",template:"",debugMode:!1,enableIM:!1}}}},watch:{config:{handler:function(e,t){this.propertyObserverFun({name:"config",newVal:e,oldVal:t})},immediate:!0,deep:!0}},created:function(){console.log(p,"created",a),l.default.App.init({appID:"500710685",eventID:"500710697",autoReport:!0,statParam:!0})},beforeMount:function(){console.log(p,"attached"),this.initFun(),l.default.Page.stat()},mounted:function(){console.log(p,"ready")},destroyed:function(){console.log(p,"detached"),this.exitRoom()},error:function(e){console.log(p,"error",e)},onPageShow:function(){var t=this;if(console.log(p,"show status:",this.status),this.status.isPending)this.status.isPending=!1,this.enterRoom({roomID:this.config.roomID}).then((function(){}));else if(a.IS_ANDROID&&"hide"===this.status.pageLife&&this.status.isOnHideAddStream&&this.streamList.length>0){for(var s=this.streamList,r=[],o=0;o<s.length;o++)if(s[o].isOnHideAdd&&s[o].playerContext){var n=s[o];r.push(n),n.playerContext=void 0,s.splice(o,1)}this.setListFun({streamList:s}).then((function(){for(var o=0;o<r.length;o++)s.push(r[o]);t.setListFun({streamList:s}).then((function(){for(var s=0;s<r.length;s++)r[s]=e.createLivePlayerContext(r[s].streamID,t);r=[]}))})),this.status.isOnHideAddStream=!1}this.status.pageLife="show"},onPageHide:function(){console.log(p,"hide"),this.status.pageLife="hide"},onPageResize:function(e){console.log(p,"resize",e)},methods:{initFun:function(){console.log(p,"_init"),this.userController=new r.default(this),this._emitter=new i.default,this.EVENT=n.EVENT,this.initStatusFun(),this.bindEventFun(),this.gridBindEventFun(),this.keepScreenOnFun(),console.log(p,"_init success component:",this)},initStatusFun:function(){this.status={isPush:!1,isPending:!1,pageLife:"",isOnHideAddStream:!1},this._lastTapTime=0,this._beforeLastTapTime=0,this._lastTapCoordinate={x:0,y:0},this._isFullscreen=!1},propertyObserverFun:function(e){if(console.log(p,"propertyObserverFun",e,this.config),"config"===e.name){var t=Object.assign({},n.DEFAULT_COMPONENT_CONFIG,e.newVal);console.log(p,"propertyObserverFun config:",t),"string"===typeof t.debugMode&&(t.debugMode="true"===t.debugMode),t.enableIM&&t.sdkAppID&&this.initIMFun(t),t.sdkAppID&&e.oldVal.sdkAppID!==t.sdkAppID&&l.default&&l.default.Event.stat("sdkAppID",{value:t.sdkAppID}),this.setData({enableIM:t.enableIM,template:t.template,debugMode:t.debugMode||!1,debug:t.debugMode||!1}),this.setPusherConfigFun(t)}},enterRoom:function(e){var t=this;return new Promise((function(s,r){console.log(p,"enterRoom"),console.log(p,"params",e),console.log(p,"config",t.config),console.log(p,"pusher",t.pusher),e&&(Object.assign(t.pusher,e),Object.assign(t.config,e)),t.checkParamFun(t.config)?(t.getPushUrlFun(t.config).then((function(e){t.pusher.url=e,t.setData({pusher:t.pusher},(function(){console.log(p,"enterRoom",t.pusher),t.pusher.getPusherContext().start(),t.status.isPush=!0,s()}))})).catch((function(e){console.error(p,"enterRoom error",e),r(e)})),t.loginIMFun(m(m({},t.config),{},{roomID:e.roomID}))):r(new Error("缺少必要参数"))}))},exitRoom:function(){var e=this;return"hide"===this.status.pageLife&&console.warn(p,"小程序最小化时不能调用 exitRoom，如果不想听到远端声音，可以调用取消订阅，如果不想远端听到声音，可以调用取消发布"),new Promise((function(t,s){console.log(p,"exitRoom"),e.exitIMFun(),e.pusher.reset(),e.status.isPush=!1;var r=e.userController.reset();e.setData({pusher:e.pusher,userList:r.userList,streamList:r.streamList,visibleStreamList:e.filterVisibleStreamFun(r.streamList)},(function(){t({userList:e.userList,streamList:e.streamList}),console.log(p,"exitRoom success",e.pusher,e.streamList,e.userList),e._emitter.emit(n.EVENT.LOCAL_LEAVE,{userID:e.pusher.userID})}))}))},publishLocalVideo:function(){return console.log(p,"publishLocalVideo 开启摄像头"),this.setPusherConfigFun({enableCamera:!0})},unpublishLocalVideo:function(){return console.log(p,"unpublshLocalVideo 关闭摄像头"),this.setPusherConfigFun({enableCamera:!1})},publishLocalAudio:function(){return console.log(p,"publishLocalAudio 开启麦克风"),this.setPusherConfigFun({enableMic:!0})},unpublishLocalAudio:function(){return console.log(p,"unpublshLocalAudio 关闭麦克风"),this.setPusherConfigFun({enableMic:!1})},subscribeRemoteVideo:function(e){console.log(p,"subscribeRemoteVideo",e);var t={muteVideo:!1},s="small"===e.streamType?"main":e.streamType,r=this.userController.getStream({userID:e.userID,streamType:s});return r.muteVideoPrev=!1,"small"!==e.streamType&&"main"!==e.streamType||r&&"main"===r.streamType&&(console.log(p,"subscribeRemoteVideo switch small",r.src),"small"===e.streamType?(t.src=r.src.replace("main","small"),t._definitionType="small"):"main"===e.streamType&&(r.src=r.src.replace("small","main"),t._definitionType="main"),console.log(p,"subscribeRemoteVideo",r.src)),this.setPlayerConfigFun({userID:e.userID,streamType:s,config:t})},unsubscribeRemoteVideo:function(e){console.log(p,"unsubscribeRemoteVideo",e);var t=this.userController.getStream({userID:e.userID,streamType:e.streamType});return t.muteVideoPrev=!0,this.setPlayerConfigFun({userID:e.userID,streamType:e.streamType,config:{muteVideo:!0}})},subscribeRemoteAudio:function(e){return console.log(p,"subscribeRemoteAudio",e),this.setPlayerConfigFun({userID:e.userID,streamType:"main",config:{muteAudio:!1}})},unsubscribeRemoteAudio:function(e){return console.log(p,"unsubscribeRemoteAudio",e),this.setPlayerConfigFun({userID:e.userID,streamType:"main",config:{muteAudio:!0}})},on:function(e,t,s){this._emitter.on(e,t,s)},off:function(e,t){this._emitter.off(e,t)},getRemoteUserList:function(){return this.userList},switchCamera:function(){var e=this;this.cameraPosition||(this.cameraPosition=this.pusher.frontCamera),console.log(p,"switchCamera",this.cameraPosition),this.cameraPosition="front"===this.cameraPosition?"back":"front",this.setData({cameraPosition:this.cameraPosition},(function(){console.log(p,"switchCamera success",e.cameraPosition)})),this.pusher.getPusherContext().switchCamera()},setViewRect:function(e){return console.log(p,"setViewRect",e),"custom"!==this.template&&console.warn('如需使用setViewRect方法，请初始化时设置template:"custom", 当前 template:"'.concat(this.template,'"')),console.info("不建议使用该方法动态修改样式，避免引起微信小程序渲染问题，建议直接修改 wxml wxss 进行样式定制化"),this.pusher.userID===e.userID?this.setPusherConfigFun({xAxis:e.xAxis,yAxis:e.yAxis,width:e.width,height:e.height}):this.setPlayerConfigFun({userID:e.userID,streamType:e.streamType,config:{xAxis:e.xAxis,yAxis:e.yAxis,width:e.width,height:e.height}})},setViewVisible:function(e){return console.log(p,"setViewVisible",e),"custom"!==this.template&&console.warn('如需使用setViewVisible方法，请初始化时设置template:"custom", 当前 template:"'.concat(this.template,'"')),console.info("不建议使用该方法动态修改样式，避免引起微信小程序渲染问题，建议直接修改 wxml wxss 进行样式定制化"),this.pusher.userID===e.userID?this.setPusherConfigFun({isVisible:e.isVisible}):this.setPlayerConfigFun({userID:e.userID,streamType:e.streamType,config:{isVisible:e.isVisible}})},setViewZIndex:function(e){return console.log(p,"setViewZIndex",e),"custom"!==this.template&&console.warn('如需使用setViewZIndex方法，请初始化时设置template:"custom", 当前 template:"'.concat(this.template,'"')),console.info("不建议使用该方法动态修改样式，避免引起微信小程序渲染问题，建议直接修改 wxml wxss 进行样式定制化"),this.pusher.userID===e.userID?this.setPusherConfigFun({zIndex:e.zindex||e.zIndex}):this.setPlayerConfigFun({userID:e.userID,streamType:e.streamType,config:{zIndex:e.zindex||e.zIndex}})},playBGM:function(e){var t=this;return new Promise((function(s,r){t.pusher.getPusherContext().playBGM({url:e.url,success:function(){console.log(p,"播放背景音成功"),s()},fail:function(){console.log(p,"播放背景音失败"),t._emitter.emit(n.EVENT.BGM_PLAY_FAIL),r(new Error("播放背景音失败"))}})}))},stopBGM:function(){this.pusher.getPusherContext().stopBGM()},pauseBGM:function(){this.pusher.getPusherContext().pauseBGM()},resumeBGM:function(){this.pusher.getPusherContext().resumeBGM()},setBGMVolume:function(e){console.log(p,"setBGMVolume",e),this.pusher.getPusherContext().setBGMVolume({volume:e.volume})},setMICVolume:function(e){console.log(p,"setMICVolume",e),this.pusher.getPusherContext().setMICVolume({volume:e.volume})},sendSEI:function(e){var t=this;return new Promise((function(s,r){t.pusher.getPusherContext().sendMessage({msg:e.message,success:function(e){s(e)}})}))},snapshot:function(t){var s=this;return console.log(p,"snapshot",t),new Promise((function(r,o){s.captureSnapshot(t).then((function(t){e.saveImageToPhotosAlbum({filePath:t.tempImagePath,success:function(s){e.showToast({title:"已保存到相册"}),console.log("save photo is success",s),r(t)},fail:function(t){e.showToast({icon:"none",title:"保存失败"}),console.log("save photo is fail",t),o(t)}})})).catch((function(e){o(e)}))}))},captureSnapshot:function(e){var t=this;return new Promise((function(s,r){e.userID===t.pusher.userID?t.pusher.getPusherContext().snapshot({quality:"raw",complete:function(e){console.log(p,"snapshot pusher",e),e.tempImagePath?s(e):(console.log("snapShot 回调失败",e),r(new Error("截图失败")))}}):t.userController.getStream(e).playerContext.snapshot({quality:"raw",complete:function(e){console.log(p,"snapshot player",e),e.tempImagePath?s(e):(console.log("snapShot 回调失败",e),r(new Error("截图失败")))}})}))},enterFullscreen:function(e){var t=this;return console.log(p,"enterFullscreen",e),new Promise((function(s,r){t.userController.getStream(e).playerContext.requestFullScreen({direction:e.direction||0,success:function(e){console.log(p,"enterFullscreen success",e),s(e)},fail:function(e){console.log(p,"enterFullscreen fail",e),r(e)}})}))},exitFullscreen:function(e){var t=this;return console.log(p,"exitFullscreen",e),new Promise((function(s,r){t.userController.getStream(e).playerContext.exitFullScreen({success:function(e){console.log(p,"exitFullScreen success",e),s(e)},fail:function(e){console.log(p,"exitFullScreen fail",e),r(e)}})}))},setRemoteOrientation:function(e){return this.setPlayerConfigFun({userID:e.userID,streamType:e.streamType,config:{orientation:e.orientation}})},setViewOrientation:function(e){return this.setPlayerConfigFun({userID:e.userID,streamType:e.streamType,config:{orientation:e.orientation}})},setRemoteFillMode:function(e){return this.setPlayerConfigFun({userID:e.userID,streamType:e.streamType,config:{objectFit:e.fillMode}})},setViewFillMode:function(e){return this.setPlayerConfigFun({userID:e.userID,streamType:e.streamType,config:{objectFit:e.fillMode}})},sendC2CTextMessage:function(e){if(this.tim){console.log(p,"sendC2CTextMessage",e);var t=this.tim.createTextMessage({to:e.userID+"",conversationType:u.default.TYPES.CONV_C2C,payload:{text:e.message}}),s=this.tim.sendMessage(t);return s.then((function(e){console.log(p,"sendC2CTextMessage success",e)})).catch((function(e){console.warn(p,"sendC2CTextMessage error:",e)})),s}console.warn(p,"未开启IM功能，该方法无法使用",e)},sendC2CCustomMessage:function(e){if(this.tim){console.log(p,"sendC2CCustomMessage",e);var t=this.tim.createCustomMessage({to:e.userID+"",conversationType:u.default.TYPES.CONV_C2C,payload:e.payload}),s=this.tim.sendMessage(t);return s.then((function(e){console.log(p,"sendMessage success",e)})).catch((function(e){console.warn(p,"sendMessage error:",e)})),s}console.warn(p,"未开启IM功能，该方法无法使用",e)},sendGroupTextMessage:function(e){if(this.tim){console.log(p,"sendGroupTextMessage",e);var t=this.tim.createTextMessage({to:e.roomID+"",conversationType:u.default.TYPES.CONV_GROUP,payload:{text:e.message}}),s=this.tim.sendMessage(t);return s.then((function(e){console.log(p,"sendGroupTextMessage success",e)})).catch((function(e){console.warn(p,"sendGroupTextMessage error:",e)})),s}console.warn(p,"未开启IM功能，该方法无法使用",e)},sendGroupCustomMessage:function(e){if(this.tim){console.log(p,"sendGroupCustomMessage",e);var t=this.tim.createCustomMessage({to:e.roomID+"",conversationType:u.default.TYPES.CONV_GROUP,payload:e.payload}),s=this.tim.sendMessage(t);return s.then((function(e){console.log(p,"sendMessage success",e)})).catch((function(e){console.warn(p,"sendMessage error:",e)})),s}console.warn(p,"未开启IM功能，该方法无法使用",e)},setPusherConfigFun:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return s||console.log(p,"_setPusherConfig",e,this.pusher),new Promise((function(r,n){t.pusher?Object.assign(t.pusher,e):t.pusher=new o.default(e),t.setData({pusher:t.pusher},(function(){s||console.log(p,"_setPusherConfig setData compelete","config:",e,"pusher:",t.pusher),r(e)}))}))},setPlayerConfigFun:function(e){var t=this,s=e.userID,r=e.streamType,o=e.config;return console.log(p,"_setPlayerConfig",e),new Promise((function(n,i){var a=t.userController.getUser(s);a&&a.streams[r]?(Object.assign(a.streams[r],o),t.setData({streamList:t.streamList,visibleStreamList:t.filterVisibleStreamFun(t.streamList,!0)},(function(){n(e)}))):console.warn(p,"指定 userID 或者 streamType 不存在")}))},setListFun:function(e){var t=this;console.log(p,"_setList",e,this.template);var s=e.userList,r=e.streamList;return new Promise((function(o,n){var i=[],a={userList:s||t.userList,streamList:r||t.streamList};"grid"===t.template&&(i=t.filterVisibleStreamFun(r),a.visibleStreamList=i||t.visibleStreamList,a.gridPagePlaceholderStreamList=t.gridPagePlaceholderStreamList,a.gridCurrentPage=t.gridCurrentPage,a.gridPageCount=t.gridPageCount),t.setData(a,(function(){o(e)}))}))},checkParamFun:function(e){return console.log(p,"checkParam config:",e),e.sdkAppID?void 0===e.roomID?(console.error("未设置 roomID"),!1):e.roomID<1||e.roomID>4294967296?(console.error("roomID 超出取值范围 1 ~ 4294967295"),!1):e.userID?e.userSig?!!e.template||(console.error("未设置 template"),!1):(console.error("未设置 userSig"),!1):(console.error("未设置 userID"),!1):(console.error("未设置 sdkAppID"),!1)},getPushUrlFun:function(e){if(console.log(p,"_getPushUrl",e),a.IS_TRTC)return new Promise((function(t,s){e.scene=e.scene&&"rtc"!==e.scene?e.scene:"videocall",e.enableBlackStream=e.enableBlackStream||"",e.encsmall=e.encsmall||0,e.cloudenv=e.cloudenv||"PRO",e.streamID=e.streamID||"",e.userDefineRecordID=e.userDefineRecordID||"",e.privateMapKey=e.privateMapKey||"",e.pureAudioMode=e.pureAudioMode||"",e.recvMode=e.recvMode||1;var r="";r=/^\d+$/.test(e.roomID)?"&roomid="+e.roomID:"&strroomid="+e.roomID,setTimeout((function(){var s="room://cloud.tencent.com/rtc?sdkappid="+e.sdkAppID+r+"&userid="+e.userID+"&usersig="+e.userSig+"&appscene="+e.scene+"&encsmall="+e.encsmall+"&cloudenv="+e.cloudenv+"&enableBlackStream="+e.enableBlackStream+"&streamid="+e.streamID+"&userdefinerecordid="+e.userDefineRecordID+"&privatemapkey="+e.privateMapKey+"&pureaudiomode="+e.pureAudioMode+"&recvmode="+e.recvMode;console.warn(p,"getPushUrl result:",s),t(s)}),0)}));console.error(p,"组件仅支持微信 App iOS >=7.0.9, Android >= 7.0.8, 小程序基础库版 >= 2.10.0"),console.error(p,"需要真机运行，开发工具不支持实时音视频")},requestSigServerFun:function(t){console.log(p,"_requestSigServer:",t);var s=t.sdkAppID,r=t.userID,o=t.userSig,n=t.roomID,i=t.privateMapKey;t.useCloud=void 0===t.useCloud||t.useCloud;var a=t.useCloud?"https://official.opensso.tencent-cloud.com/v4/openim/jsonvideoapp":"https://yun.tim.qq.com/v4/openim/jsonvideoapp";a+="?sdkappid="+s+"&identifier="+r+"&usersig="+o+"&random="+Date.now()+"&contenttype=json";var u={Cmd:1,SeqNo:1,BusType:7,GroupId:n},l={PrivMapEncrypt:i,TerminalType:1,FromType:3,SdkVersion:26280566};return console.log(p,"_requestSigServer:",a,u,l),new Promise((function(o,i){e.request({url:a,data:{ReqHead:u,ReqBody:l},method:"POST",success:function(e){console.log("_requestSigServer success:",e),(e.data["ErrorCode"]||0!==e.data["RspHead"]["ErrorCode"])&&(console.error("获取roomsig失败"),i(e));var a=JSON.stringify(e.data["RspBody"]),u="room://cloud.tencent.com?sdkappid="+s+"&roomid="+n+"&userid="+r+"&roomsig="+encodeURIComponent(a);if(t.pureAudioPushMod||t.recordId){var l={Str_uc_params:{pure_audio_push_mod:0,record_id:0}};t.pureAudioPushMod?l.Str_uc_params.pure_audio_push_mod=t.pureAudioPushMod:delete l.Str_uc_params.pure_audio_push_mod,t.recordId?l.Str_uc_params.record_id=t.recordId:delete l.Str_uc_params.record_id,u+="&bizbuf="+encodeURIComponent(JSON.stringify(l))}console.log("roomSigInfo",u),o(u)},fail:function(e){console.log(p,"requestSigServer fail:",e),i(e)}})}))},doubleTabToggleFullscreenFun:function(e){var t=this,s=e.timeStamp,r=this._lastTapTime,o=this._lastTapCoordinate,n=e.detail,i=Math.sqrt(Math.pow(Math.abs(n.x-o.x),2)+Math.pow(Math.abs(n.y-o.y),2));this._lastTapCoordinate=n;var a=this._beforeLastTapTime;if(console.log(p,"doubleTabToggleFullscreenFun",e,r,a,i),s-r>0&&s-r<300&&r-a>1500&&i<20){var u,l=e.currentTarget.dataset.userid,c=e.currentTarget.dataset.streamtype;if(this._isFullscreen)this.exitFullscreen({userID:l,streamType:c}).then((function(){t._isFullscreen=!1})).catch((function(){}));else this.enterFullscreen({userID:l,streamType:c,direction:u}).then((function(){t._isFullscreen=!0})).catch((function(){}));this._beforeLastTapTime=r}this._lastTapTime=s},bindEventFun:function(){var t=this;this.userController.on(n.EVENT.REMOTE_USER_JOIN,(function(e){console.log(p,"远端用户进房",e,e.data.userID),t.setData({userList:e.data.userList},(function(){t._emitter.emit(n.EVENT.REMOTE_USER_JOIN,{userID:e.data.userID})})),console.log(p,"REMOTE_USER_JOIN","streamList:",t.streamList,"userList:",t.userList)})),this.userController.on(n.EVENT.REMOTE_USER_LEAVE,(function(e){console.log(p,"远端用户离开",e,e.data.userID),e.data.userID&&t.setListFun({userList:e.data.userList,streamList:e.data.streamList}).then((function(){t._emitter.emit(n.EVENT.REMOTE_USER_LEAVE,{userID:e.data.userID})})),console.log(p,"REMOTE_USER_LEAVE","streamList:",t.streamList,"userList:",t.userList)})),this.userController.on(n.EVENT.REMOTE_VIDEO_ADD,(function(s){console.log(p,"远端视频可用",s,s.data.stream.userID);var r=s.data.stream;"hide"===t.status.pageLife&&(t.status.isOnHideAddStream=!0,r.isOnHideAdd=!0),t.setListFun({userList:s.data.userList,streamList:s.data.streamList}).then((function(){r.playerContext=e.createLivePlayerContext(r.streamID,t),t._emitter.emit(n.EVENT.REMOTE_VIDEO_ADD,{userID:r.userID,streamType:r.streamType})})),console.log(p,"REMOTE_VIDEO_ADD","streamList:",t.streamList,"userList:",t.userList)})),this.userController.on(n.EVENT.REMOTE_VIDEO_REMOVE,(function(e){console.log(p,"远端视频移除",e,e.data.stream.userID);var s=e.data.stream;t.setListFun({userList:e.data.userList,streamList:e.data.streamList}).then((function(){s.userID&&s.streamType&&t._emitter.emit(n.EVENT.REMOTE_VIDEO_REMOVE,{userID:s.userID,streamType:s.streamType})})),console.log(p,"REMOTE_VIDEO_REMOVE","streamList:",t.streamList,"userList:",t.userList)})),this.userController.on(n.EVENT.REMOTE_AUDIO_ADD,(function(s){console.log(p,"远端音频可用",s);var r=s.data.stream;t.setListFun({userList:s.data.userList,streamList:s.data.streamList}).then((function(){r.playerContext=e.createLivePlayerContext(r.streamID,t),t._emitter.emit(n.EVENT.REMOTE_AUDIO_ADD,{userID:r.userID,streamType:r.streamType})})),console.log(p,"REMOTE_AUDIO_ADD","streamList:",t.streamList,"userList:",t.userList)})),this.userController.on(n.EVENT.REMOTE_AUDIO_REMOVE,(function(e){console.log(p,"远端音频移除",e,e.data.stream.userID);var s=e.data.stream;t.setListFun({userList:e.data.userList,streamList:e.data.streamList}).then((function(){s.userID&&s.streamType&&t._emitter.emit(n.EVENT.REMOTE_AUDIO_REMOVE,{userID:s.userID,streamType:s.streamType})})),console.log(p,"REMOTE_AUDIO_REMOVE","streamList:",t.streamList,"userList:",t.userList)}))},pusherStateChangeHandlerFun:function(e){var t=e.detail.code,s=e.detail.message;switch(console.log(p,"pusherStateChange：",t,e),t){case 0:console.log(p,s,t);break;case 1001:console.log(p,"已经连接推流服务器",t);break;case 1002:console.log(p,"已经与服务器握手完毕,开始推流",t);break;case 1003:console.log(p,"打开摄像头成功",t);break;case 1004:console.log(p,"录屏启动成功",t);break;case 1005:console.log(p,"推流动态调整分辨率",t);break;case 1006:console.log(p,"推流动态调整码率",t);break;case 1007:console.log(p,"首帧画面采集完成",t);break;case 1008:console.log(p,"编码器启动",t);break;case 1018:console.log(p,"进房成功",t),this._emitter.emit(n.EVENT.LOCAL_JOIN,{userID:this.pusher.userID});break;case 1019:console.log(p,"退出房间",t);break;case 2003:console.log(p,"渲染首帧视频",t);break;case 1020:case 1031:case 1032:case 1033:case 1034:this.userController.userEventHandler(e);break;case-1301:console.error(p,"打开摄像头失败: ",t),this._emitter.emit(n.EVENT.ERROR,{code:t,message:s});break;case-1302:console.error(p,"打开麦克风失败: ",t),this._emitter.emit(n.EVENT.ERROR,{code:t,message:s});break;case-1303:console.error(p,"视频编码失败: ",t),this._emitter.emit(n.EVENT.ERROR,{code:t,message:s});break;case-1304:console.error(p,"音频编码失败: ",t),this._emitter.emit(n.EVENT.ERROR,{code:t,message:s});break;case-1307:console.error(p,"推流连接断开: ",t),this._emitter.emit(n.EVENT.ERROR,{code:t,message:s});break;case-100018:console.error(p,"进房失败: userSig 校验失败，请检查 userSig 是否填写正确",t,s),this._emitter.emit(n.EVENT.ERROR,{code:t,message:s});break;case 5e3:console.log(p,"小程序被挂起: ",t);break;case 5001:console.log(p,"小程序悬浮窗被关闭: ",t),this.status.isPending=!0,this.status.isPush&&this.exitRoom();break;case 1021:console.log(p,"网络类型发生变化，需要重新进房",t);break;case 2007:console.log(p,"本地视频播放loading: ",t);break;case 2004:console.log(p,"本地视频播放开始: ",t);break;default:console.log(p,s,t)}},pusherNetStatusHandlerFun:function(e){this._emitter.emit(n.EVENT.LOCAL_NET_STATE_UPDATE,e)},pusherErrorHandlerFun:function(e){console.warn(p,"pusher error",e);try{var t=e.detail.errCode,s=e.detail.errMsg;this._emitter.emit(n.EVENT.ERROR,{code:t,message:s})}catch(r){console.error(p,"pusher error data parser exception",e,r)}},pusherBGMStartHandlerFun:function(e){},pusherBGMProgressHandlerFun:function(e){this._emitter.emit(n.EVENT.BGM_PLAY_PROGRESS,e)},pusherBGMCompleteHandlerFun:function(e){this._emitter.emit(n.EVENT.BGM_PLAY_COMPLETE,e)},pusherAudioVolumeNotifyFun:function(e){this._emitter.emit(n.EVENT.LOCAL_AUDIO_VOLUME_UPDATE,e)},playerStateChangeFun:function(e){this._emitter.emit(n.EVENT.REMOTE_STATE_UPDATE,e)},playerFullscreenChangeFun:function(e){this._emitter.emit(n.EVENT.REMOTE_FULLSCREEN_UPDATE,e),this._emitter.emit(n.EVENT.VIDEO_FULLSCREEN_UPDATE,e)},playerNetStatusFun:function(e){var t=this.userController.getStream({userID:e.currentTarget.dataset.userid,streamType:e.currentTarget.dataset.streamtype});!t||t.videoWidth===e.detail.info.videoWidth&&t.videoHeight===e.detail.info.videoHeight||(console.log(p,"playerNetStatusFun update video size",e),t.videoWidth=e.detail.info.videoWidth,t.videoHeight=e.detail.info.videoHeight),this._emitter.emit(n.EVENT.REMOTE_NET_STATE_UPDATE,e)},playerAudioVolumeNotifyFun:function(e){this._emitter.emit(n.EVENT.REMOTE_AUDIO_VOLUME_UPDATE,e)},filterVisibleStreamFun:function(e,t){var s=e.filter((function(e){return e.hasVideo||e.hasAudio}));return s.sort((function(e,t){var s=e.userID.toUpperCase(),r=t.userID.toUpperCase();return s<r?-1:s>r?1:0})),"grid"!==this.template||t||(this.filterGridPageVisibleStreamFun(s),this.gridCurrentPage>1&&this.gridPagePlaceholderStreamList.length===this.gridPlayerPerPage&&this.gridPageToPrevFun(s)),s},filterGridPageVisibleStreamFun:function(e){var t=e.length;this.gridPageCount=Math.ceil((t+1)/this.gridPlayerPerPage),this.gridPagePlaceholderStreamList=[];var s,r=0;s=this.gridPlayerPerPage>3?1===this.gridCurrentPage?[-1,this.gridPlayerPerPage-1]:[this.gridCurrentPage*this.gridPlayerPerPage-(this.gridPlayerPerPage+2),this.gridCurrentPage*this.gridPlayerPerPage-1]:[this.gridCurrentPage*this.gridPlayerPerPage-(this.gridPlayerPerPage+1),this.gridCurrentPage*this.gridPlayerPerPage];for(var o=0;o<t;o++)o>s[0]&&o<s[1]?(e[o].isVisible=!0,e[o].muteVideo=void 0===e[o].muteVideoPrev?e[o].muteVideo:e[o].muteVideoPrev,r++):(e[o].isVisible=!1,e[o].muteVideo=!0);if(1!==this.gridCurrentPage)for(var n=0;n<this.gridPlayerPerPage-r;n++)this.gridPagePlaceholderStreamList.push({id:"holder-"+n});return e},keepScreenOnFun:function(){setInterval((function(){e.setKeepScreenOn({keepScreenOn:!0})}),2e4)},initIMFun:function(t){if(t.enableIM&&t.sdkAppID&&!this.tim){console.log(p,"_initIM",t);var s=u.default.create({SDKAppID:t.sdkAppID});t.debugMode?s.setLogLevel(1):s.setLogLevel(4),s.off(u.default.EVENT.SDK_READY,this.onIMReadyFun),s.off(u.default.EVENT.MESSAGE_RECEIVED,this.onIMMessageReceivedFun),s.off(u.default.EVENT.SDK_NOT_READY,this.onIMNotReadyFun),s.off(u.default.EVENT.KICKED_OUT,this.onIMKickedOutFun),s.off(u.default.EVENT.ERROR,this.onIMErrorFun),s.on(u.default.EVENT.SDK_READY,this.onIMReadyFun,this),s.on(u.default.EVENT.MESSAGE_RECEIVED,this.onIMMessageReceivedFun,this),s.on(u.default.EVENT.SDK_NOT_READY,this.onIMNotReadyFun,this),s.on(u.default.EVENT.KICKED_OUT,this.onIMKickedOutFun,this),s.on(u.default.EVENT.ERROR,this.onIMErrorFun,this),this.tim=s,e.tim=s}},loginIMFun:function(e){if(this.tim)return console.log(p,"_loginIM",e),this.tim.login({userID:e.userID,userSig:e.userSig})},logoutIMFun:function(){if(this.tim)return console.log(p,"_logoutIM"),this.tim.logout()},exitIMFun:function(){var e=this;if(!this.exitIMThrottle&&this.tim){this.exitIMThrottle=!0;var t=this.getRemoteUserList(),s=this.config.roomID,r=this.config.userID;this.searchGroupFun({roomID:s}).then((function(o){o.data.group.ownerID===r&&0===t.length?e.dismissGroupFun({roomID:s}).then((function(){e.exitIMThrottle=!1,e.logoutIMFun()})).catch((function(t){e.exitIMThrottle=!1,e.logoutIMFun()})):o.data.group.ownerID===r?(e.exitIMThrottle=!1,e.logoutIMFun()):e.quitGroupFun({roomID:s}).then((function(){e.exitIMThrottle=!1,e.logoutIMFun()})).catch((function(t){e.exitIMThrottle=!1,e.logoutIMFun()}))})).catch((function(t){e.exitIMThrottle=!1,e.logoutIMFun()}))}},searchGroupFun:function(e){if(this.tim){console.log(p,"_searchGroup",e);var t=this.tim,s=t.searchGroupByID(e.roomID+"");return s.then((function(e){console.log(p,"_searchGroup success",e)})).catch((function(e){console.warn(p,"_searchGroup fail，TIM 报错信息不影响后续逻辑，可以忽略",e)})),s}},createGroupFun:function(e){if(this.tim){console.log(p,"_createGroup",e);var t=this.tim.createGroup({groupID:e.roomID+"",name:e.roomID+"",type:T});return t.then((function(e){console.log(p,"_createGroup success",e.data.group)})).catch((function(e){console.warn(p,"_createGroup error",e)})),t}},joinGroupFun:function(e){if(this.tim){console.log(p,"_joinGroup",e);var t=this.tim.joinGroup({groupID:e.roomID+"",type:T});return t.then((function(e){switch(e.data.status){case u.default.TYPES.JOIN_STATUS_WAIT_APPROVAL:break;case u.default.TYPES.JOIN_STATUS_SUCCESS:case u.default.TYPES.JOIN_STATUS_ALREADY_IN_GROUP:console.log(p,"_joinGroup success",e);break;default:break}})).catch((function(e){console.warn(p,"joinGroup error",e)})),t}},quitGroupFun:function(e){if(this.tim){console.log(p,"_quitGroup",e);var t=this.tim.quitGroup(e.roomID+"");return t.then((function(e){console.log(p,"_quitGroup success",e)})).catch((function(e){console.warn(p,"quitGroup error",e)})),t}},dismissGroupFun:function(e){if(this.tim){console.log(p,"_dismissGroup",e);var t=this.tim.dismissGroup(e.roomID+"");return t.then((function(e){console.log(p,"_dismissGroup success",e)})).catch((function(e){console.warn(p,"_dismissGroup error",e)})),t}},onIMReadyFun:function(e){var t=this;console.log(p,"IM.READY",e),this._emitter.emit(n.EVENT.IM_READY,e);var s=this.config.roomID;this.searchGroupFun({roomID:s}).then((function(e){t.joinGroupFun({roomID:s})})).catch((function(){t.createGroupFun({roomID:s}).then((function(e){t.joinGroupFun({roomID:s})})).catch((function(r){10021===r.code&&(console.log(p,"群已存在，直接进群",e),t.joinGroupFun({roomID:s}))}))}))},onIMMessageReceivedFun:function(e){console.log(p,"IM.MESSAGE_RECEIVED",e);for(var t=e.data,s=this.config.roomID+"",r=this.config.userID+"",o=0;o<t.length;o++){var i=t[o];i.to!==s+""&&i.to!==r||(console.log(p,"IM.MESSAGE_RECEIVED",i,i.type,u.default.TYPES.MSG_TEXT),i.type===u.default.TYPES.MSG_TEXT?this.pushMessageListFun({name:i.from,message:i.payload.text}):i.type===u.default.TYPES.MSG_GRP_SYS_NOTICE&&2===i.payload.operationType&&this.pushMessageListFun({name:"系统通知",message:"欢迎 ".concat(r)}))}this._emitter.emit(n.EVENT.IM_MESSAGE_RECEIVED,e)},onIMNotReadyFun:function(e){console.log(p,"IM.NOT_READY",e),this._emitter.emit(n.EVENT.IM_NOT_READY,e)},onIMKickedOutFun:function(e){console.log(p,"IM.KICKED_OUT",e),this._emitter.emit(n.EVENT.IM_KICKED_OUT,e)},onIMErrorFun:function(e){console.log(p,"IM.ERROR",e),this._emitter.emit(n.EVENT.IM_ERROR,e)},toggleVideoFun:function(){this.pusher.enableCamera?this.unpublishLocalVideo():this.publishLocalVideo()},toggleAudioFun:function(){this.pusher.enableMic?this.unpublishLocalAudio():this.publishLocalAudio()},debugToggleRemoteVideoFun:function(e){console.log(p,"_debugToggleRemoteVideo",e.currentTarget.dataset);var t=e.currentTarget.dataset.userID,s=e.currentTarget.dataset.streamType,r=this.streamList.find((function(e){return e.userID===t&&e.streamType===s}));r.muteVideo?this.subscribeRemoteVideo({userID:t,streamType:s}):this.unsubscribeRemoteVideo({userID:t,streamType:s})},debugToggleRemoteAudioFun:function(e){console.log(p,"_debugToggleRemoteAudio",e.currentTarget.dataset);var t=e.currentTarget.dataset.userID,s=e.currentTarget.dataset.streamType,r=this.streamList.find((function(e){return e.userID===t&&e.streamType===s}));r.muteAudio?this.subscribeRemoteAudio({userID:t}):this.unsubscribeRemoteAudio({userID:t})},debugToggleVideoDebugFun:function(){this.setData({debug:!this.debug})},debugExitRoomFun:function(){this.exitRoom()},debugEnterRoomFun:function(){var e=this;Object.assign(this.pusher,this.config),this.enterRoom({roomID:this.config.roomID}).then((function(){setTimeout((function(){e.publishLocalVideo(),e.publishLocalAudio()}),2e3)}))},debugGoBackFun:function(){e.navigateBack({delta:1})},debugTogglePanelFun:function(){this.setData({debugPanel:!this.debugPanel})},debugSendRandomMessageFun:function(){var t=this.getRemoteUserList();if(0===t.length||!this.tim)return!1;var s=this.config.roomID,r="Hello! ".concat(t[0].userID," ").concat(9999*Math.random()),o=t[0].userID;this.sendC2CTextMessage({userID:o,message:r});var n=this.sendGroupTextMessage({roomID:s,message:r});this.pushMessageListFun({name:o,message:r}),n.then((function(t){console.log(p,"_debugSendRandomMessage success",t),e.showToast({title:"发送成功",icon:"success",duration:1e3})})).catch((function(t){console.warn(p,"_debugSendRandomMessage error",t),e.showToast({title:"发送失败",icon:"none",duration:1e3})}))},toggleAudioVolumeTypeFun:function(){"voicecall"===this.pusher.audioVolumeType?this.setPusherConfigFun({audioVolumeType:"media"}):this.setPusherConfigFun({audioVolumeType:"voicecall"})},toggleSoundModeFun:function(){if(0!==this.userList.length){var e=this.userController.getStream({userID:this.userList[0].userID,streamType:"main"});e&&("speaker"===e.soundMode?e["soundMode"]="ear":e["soundMode"]="speaker",this.setPlayerConfigFun({userID:e.userID,streamType:"main",config:{soundMode:e["soundMode"]}}))}},hangUpFun:function(){this.exitRoom(),e.navigateBack({delta:1})},handleSubscribeAudio:function(){this.pusher.enableMic?this.unpublishLocalAudio():this.publishLocalAudio()},handleSubscribeRemoteVideoFun:function(e){var t=e.currentTarget.dataset.userID,s=e.currentTarget.dataset.streamType,r=this.streamList.find((function(e){return e.userID===t&&e.streamType===s}));r.muteVideo?this.subscribeRemoteVideo({userID:t,streamType:s}):this.unsubscribeRemoteVideo({userID:t,streamType:s})},handleSubscribeRemoteAudioFun:function(e){var t=e.currentTarget.dataset.userID,s=e.currentTarget.dataset.streamType,r=this.streamList.find((function(e){return e.userID===t&&e.streamType===s}));r.muteAudio?this.subscribeRemoteAudio({userID:t}):this.unsubscribeRemoteAudio({userID:t})},switchMemberListPanelFun:function(){this.setData({panelName:"memberlist-panel"!==this.panelName?"memberlist-panel":""})},switchSettingPanelFun:function(){this.setData({panelName:"setting-panel"!==this.panelName?"setting-panel":""})},switchBGMPanelFun:function(){this.setData({panelName:"bgm-panel"!==this.panelName?"bgm-panel":""})},handleMaskerClickFun:function(){this.setData({panelName:""})},setPuserPropertyFun:function(e){console.log(p,"setPuserPropertyFun",e);var t=e.currentTarget.dataset.key,s=e.currentTarget.dataset.valueType,r=e.currentTarget.dataset.value,o={};"boolean"===s&&(r="true"===r,o[t]=!this.pusher[t]),"number"===s&&r.indexOf("|")>0&&(r=r.split("|"),this.pusher[t]===Number(r[0])?o[t]=Number(r[1]):o[t]=Number(r[0])),"string"===s&&r.indexOf("|")>0&&(r=r.split("|"),this.pusher[t]===r[0]?o[t]=r[1]:o[t]=r[0]),this.setPusherConfigFun(o)},setPlayerPropertyFun:function(e){console.log(p,"setPlayerPropertyFun",e);var t=e.currentTarget.dataset.userid,s=e.currentTarget.dataset.streamtype,r=e.currentTarget.dataset.key,o=e.currentTarget.dataset.value,n=this.userController.getStream({userID:t,streamType:s});if(n){var i={};"true"===o?o=!0:"false"===o&&(o=!1),"boolean"===typeof o?i[r]=!n[r]:"string"===typeof o&&o.indexOf("|")>0&&(o=o.split("|"),n[r]===o[0]?i[r]=o[1]:i[r]=o[0]),console.log(p,"setPlayerPropertyFun",i),this.setPlayerConfigFun({userID:t,streamType:s,config:i})}},changePropertyFun:function(e){var t=e.currentTarget.dataset.propertyName,s={};s[t]=e.detail.value,this.setData(s);var r=s[t]/100;switch(t){case"MICVolume":this.setMICVolume({volume:r});break;case"BGMVolume":this.setBGMVolume({volume:r});break}},switchStreamTypeFun:function(e){var t=e.currentTarget.dataset.userid,s=e.currentTarget.dataset.streamtype,r=this.userController.getStream({userID:t,streamType:s});r&&"main"===r.streamType&&("small"===r._definitionType?this.subscribeRemoteVideo({userID:t,streamType:"main"}):this.subscribeRemoteVideo({userID:t,streamType:"small"}))},handleSnapshotClickFun:function(t){e.showToast({title:"开始截屏",icon:"none",duration:1e3});var s=t.currentTarget.dataset.userid,r=t.currentTarget.dataset.streamtype;this.snapshot({userID:s,streamType:r})},gridBindEventFun:function(){var e=this;this.on(n.EVENT.REMOTE_AUDIO_VOLUME_UPDATE,(function(t){var s=t.data,r=s.currentTarget.dataset.userid,o=s.currentTarget.dataset.streamtype,n=s.detail.volume,i=e.userController.getStream({userID:r,streamType:"aux"===o?"main":o});i&&(i.volume=n),e.setData({streamList:e.streamList,visibleStreamList:e.filterVisibleStreamFun(e.streamList,!0)},(function(){}))})),this.on(n.EVENT.BGM_PLAY_PROGRESS,(function(t){var s=t.data.detail.progress/t.data.detail.duration*100;e.setData({BGMProgress:s})})),this.on(n.EVENT.LOCAL_AUDIO_VOLUME_UPDATE,(function(t){var s=t.data.detail.volume;e.setPusherConfigFun({volume:s},!0)}))},handleGridTouchStartFun:function(e){I=e.changedTouches[0].clientX,E=e.changedTouches[0].clientY},handleGridTouchEndFun:function(e){var t=e.changedTouches[0].clientX,s=e.changedTouches[0].clientY;t-I>50&&Math.abs(s-E)<50?this.gridPagePrevFun():t-I<-50&&Math.abs(s-E)<50&&this.gridPageNextFun()},gridPageToPrevFun:function(e){var t=this.filterGridPageVisibleStreamFun(e);if(this.gridPagePlaceholderStreamList.length!==this.gridPlayerPerPage)return t;this.gridCurrentPage--,this.gridPageToPrevFun(e)},gridPageNextFun:function(){this.gridCurrentPage++,this.gridCurrentPage>this.gridPageCount&&(this.gridCurrentPage=1),this.gridPageSetDataFun()},gridPagePrevFun:function(){this.gridCurrentPage--,this.gridCurrentPage<1&&(this.gridCurrentPage=this.gridPageCount),this.gridPageSetDataFun()},gridPageSetDataFun:function(){this.gridShowPageTipsFun();var e=this.filterVisibleStreamFun(this.streamList);this.setData({gridCurrentPage:this.gridCurrentPage,gridPageCount:this.gridPageCount,visibleStreamList:e,streamList:this.streamList,gridPagePlaceholderStreamList:this.gridPagePlaceholderStreamList},(function(){}))},gridShowPageTipsFun:function(e){var t=this;this.gridPageCount<2||(console.log(p,"_gridShowPageTips",this),this.hasGridPageTipsShow&&clearTimeout(this.hasGridPageTipsShow),this.animate(".pages-container",[{opacity:1}],100,(function(){})),this.hasGridPageTipsShow=setTimeout((function(){t.animate(".pages-container",[{opacity:1},{opacity:.3}],600,(function(){}))}),3e3))},toggleFullscreenFun:function(e){var t=this;console.log(p,"toggleFullscreenFun",e);var s=e.currentTarget.dataset.userID,r=e.currentTarget.dataset.streamType;if(this._isFullscreen)this.exitFullscreen({userID:s,streamType:r}).then((function(){t._isFullscreen=!1})).catch((function(){}));else{var o=0;this.enterFullscreen({userID:s,streamType:r,direction:o}).then((function(){t._isFullscreen=!0})).catch((function(){}))}},toggleMoreMenuFun:function(){this.setData({isShowMoreMenu:!this.isShowMoreMenu})},toggleIMPanelFun:function(){this.enableIM||e.showToast({icon:"none",title:"当前没有开启IM功能，请设置 enableIM:true"}),this.setData({showIMPanel:!this.showIMPanel})},handleBGMOperationFun:function(e){var t=e.currentTarget.dataset.operationName;this[t]&&this[t]({url:"https://trtc-1252463788.cos.ap-guangzhou.myqcloud.com/web/assets/bgm-test.mp3"})},selectBeautyStyleFun:function(e){var t=this;console.log(p,"_selectBeautyStyle",e);var s=e.detail.value;this.setData({beautyStyle:s},(function(){t.setPusherConfigFun({beautyLevel:"close"===s?0:9,beautyStyle:"close"===s?"smooth":s})}))},selectFilterFun:function(e){var t=this;console.log(p,"_selectFilter",e);var s=parseInt(e.detail.value);this.setData({filterIndex:s},(function(){t.setPusherConfigFun({filter:t.filterArray[s].value})}))},selectAudioReverbTypeFun:function(e){console.log(p,"_selectAudioReverbType",e);var t=parseInt(e.detail.value);this.setPusherConfigFun({audioReverbType:t})},sendIMMessageFun:function(e){if(console.log(p,"_sendIMMessage",e),this.messageContent){var t=this.config.roomID,s=this.messageContent,r=this.config.userID;this.sendGroupTextMessage({roomID:t,message:s}),this.pushMessageListFun({name:r,message:s}),this.setData({messageContent:""})}},inputIMMessageFun:function(e){this.setData({messageContent:e.detail.value})},pushMessageListFun:function(e){this.messageList.length===this.maxMessageListLength&&this.messageList.shift(),this.messageList.push(e),this.setData({messageList:this.messageList,messageListScrollTop:100*this.messageList.length},(function(){}))}}};t.default=P}).call(this,s(1)["default"])},453:function(e,t,s){"use strict";s.r(t);var r=s(454),o=s.n(r);for(var n in r)"default"!==n&&function(e){s.d(t,e,(function(){return r[e]}))}(n);t["default"]=o.a},454:function(e,t,s){}}]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/components/trtc-room/trtc-room.js.map
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/trtc-room/trtc-room-create-component',
    {
        'components/trtc-room/trtc-room-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('1')['createComponent'](__webpack_require__(438))
        })
    },
    [['components/trtc-room/trtc-room-create-component']]
]);
